#### 18.7.7.2 不可达多数超时

默认情况下，由于网络分区而陷入少数派的成员不会自动离开组。您可以使用系统变量 `group_replication_unreachable_majority_timeout` 来设置成员在与大多数组成员失去联系后等待的秒数，然后退出组。设置超时意味着您无需主动监视网络分区后处于少数派组的服务器，并且可以避免因不适当的干预而创建拆分脑（拆分组成员的两个版本）的可能性。

当 `group_replication_unreachable_majority_timeout` 指定的超时时间到期时，由该成员和少数派组中的其他成员处理的所有待处理事务都会被回滚，该组中的服务器会转移到错误状态。您可以使用 `group_replication_autorejoin_tries` 系统变量，该变量从 MySQL 8.0.16 开始可用，使成员在此时自动尝试重新加入组。从 MySQL 8.0.21 开始，默认情况下启用此功能，并且成员会进行三次自动重新加入尝试。如果自动重新加入过程失败或未尝试，那么少数派成员将遵循由 `group_replication_exit_state_action` 指定的退出操作。

在决定是否设置不可达多数超时时，请考虑以下几点：

- 在对称组中，例如具有两个或四个服务器的组中，如果两个分区包含相等数量的服务器，则两个组都认为自己处于少数派，并进入错误状态。在这种情况下，组没有功能性分区。

- 在存在少数派组时，由少数派组处理的任何事务都会被接受，但由于少数派服务器无法达到仲裁，这些事务会被阻塞，直到在这些服务器上发出 `STOP GROUP_REPLICATION` 命令或达到不可达多数超时。

- 如果不设置不可达多数超时，处于少数派组中的服务器将永远不会自动进入错误状态，您必须手动停止它们。

- 如果在检测到多数丢失后将不可达多数超时设置为服务器上的变量，则该设置不会产生任何效果。

如果不使用 `group_replication_unreachable_majority_timeout` 系统变量，则在网络分区事件中的操作员介入过程在第18.7.8节“处理网络分区和仲裁丧失”中有描述。该过程涉及检查哪些服务器正常运行，并在必要时强制进行新的组成员资格。