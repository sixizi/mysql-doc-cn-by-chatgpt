#### 18.7.2.2 组复制限流

基于在组内所有服务器上收集的指标，启动限流机制，决定是否限制成员执行/提交新事务的速率。

因此，从所有成员获取的指标是计算每个成员容量的基础：如果一个成员有大量的队列（用于认证或应用器线程），那么执行新事务的能力应接近于上一个周期中认证或应用的事务。

组中所有成员的最低容量决定了组的实际容量，而本地事务的数量决定了有多少成员向其写入，并因此决定了可用容量应与多少成员共享。

这意味着每个成员都有一个基于可用容量的确定的写入配额，换句话说，就是它在下一个周期内可以安全发起的事务数量。如果认证器的队列大小或二进制日志应用器超过用户定义的阈值，写入配额将由限流机制强制执行。

配额由上一个周期中延迟的事务数量减少，然后再减少 10%，以便触发问题的队列减少其大小。为了避免一旦队列大小超过阈值，吞吐量出现大幅波动，吞吐量仅允许在此后的每个周期内增长 10%。

当前的限流机制不会惩罚低于配额的事务，但会延迟处理超过配额的事务，直到监控周期结束。因此，如果写入请求发出的配额非常小，一些事务的延迟可能接近监控周期。

通过这种机制，组复制可以有效地控制成员的写入负载，以保持组的稳定性和性能。这种动态调整对于应对不同成员之间的性能差异和变化的工作负载非常重要，有助于确保整个组的高效运行。正确配置和管理这些限流参数对于最大化组复制环境的整体性能至关重要。