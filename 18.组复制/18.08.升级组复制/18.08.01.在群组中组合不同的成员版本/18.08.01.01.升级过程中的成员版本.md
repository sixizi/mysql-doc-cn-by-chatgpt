#### 18.8.1.1 升级期间的成员版本

在在线升级过程中，如果组处于单一主模式，所有当前未处于升级离线状态的服务器将继续像以前一样运行。每当需要时，组会选举新的主服务器，按照[第 18.1.3.1 节，"单一主模式"](https://dev.mysql.com/doc/refman/8.0/en/group-replication-primary-component.html)中描述的选举策略进行。请注意，如果您要求主服务器在整个过程中保持不变（除非它本身正在升级），您必须首先将所有辅助服务器升级到高于或等于目标主服务器成员版本的版本，然后最后升级主服务器。主服务器只有在组内运行的 MySQL Server 版本最低时才能保持为主服务器。主服务器升级后，您可以使用 `group_replication_set_as_primary()` 函数将其重新指定为主服务器。

如果组处于多主模式，升级过程中可用于执行写操作的在线成员较少，因为升级后的成员在升级后以只读模式加入。从 MySQL 8.0.17 开始，这适用于补丁版本之间的升级，而对于较低版本，这仅适用于主要版本之间的升级。当所有成员都已升级到相同的版本后，从 MySQL 8.0.17 开始，它们将自动恢复为读写模式。对于较早的版本，您必须在升级后手动将 `super_read_only` 设置为 `OFF`，以便每个成员可以在升级后作为主服务器运行。

为了解决问题情况，例如必须回滚升级或在紧急情况下添加额外容量到组中，可以允许成员加入在线组，即使它运行的 MySQL Server 版本低于其他组成员使用的最低版本。在这种情况下，可以使用 Group Replication 系统变量 `group_replication_allow_local_lower_version_join` 来覆盖正常的兼容性策略。重要的是要注意，将选项设置为 `ON` 不会使新成员与组兼容，允许它加入组，而不会对现有成员的不兼容行为采取任何保护措施。因此，在特定情况下，必须谨慎使用此选项，并且必须采取额外的预防措施，以避免新成员由于正常组活动而失败。有关这些预防措施的详细信息，请参阅 `group_replication_allow_local_lower_version_join` 的描述。