#### 6.2.3 授权表

MySQL系统数据库包含多个授权表，这些表包含有关用户账户及其拥有的特权的信息。本节描述了这些表。有关系统数据库中其他表的信息，请参见第5.3节，“mysql系统模式”。

此处的讨论描述了授权表的底层结构以及服务器在与客户端交互时如何使用它们的内容。然而，通常你不会直接修改授权表。当你使用诸如CREATE USER、GRANT和REVOKE之类的账户管理语句来设置账户并控制每个账户可用的特权时，会间接地进行修改。参见第13.7.1节，“账户管理语句”。当你使用此类语句进行账户操作时，服务器会代表你修改授权表。

> **注意**
>
> 不鼓励使用诸如INSERT、UPDATE或DELETE等语句直接修改授权表，这样做是自担风险的。如果由于此类修改导致行格式错误，服务器可以自由地忽略这些行。
>
> 对于任何修改授权表的操作，服务器都会检查表是否具有预期的结构，并在不符合时产生错误。要更新表到预期的结构，请执行MySQL升级程序。参见第2.10节，“升级MySQL”。

- [授权表概述](#授权表概述)
- [user和db授权表](#user和db授权表)
- [tables_priv和columns_priv授权表](#tables_priv和columns_priv授权表)
- [procs_priv授权表](#procs_priv授权表)
- [proxies_priv授权表](#proxies_priv授权表)
- [global_grants授权表](#global_grants授权表)
- [default_roles授权表](#default_roles授权表)
- [role_edges授权表](#role_edges授权表)
- [password_history授权表](#password_history授权表)
- [授权表范围列属性](#授权表范围列属性)
- [授权表特权列属性](#授权表特权列属性)
- [授权表并发性](#授权表并发性)

##### 授权表概述

这些mysql数据库表包含授权信息：

- user：用户账户、静态全局特权和其他非特权列。
- global_grants：动态全局特权。
- db：数据库级特权。
- tables_priv：表级特权。
- columns_priv：列级特权。
- procs_priv：存储过程和函数特权。
- proxies_priv：代理用户特权。
- default_roles：用户默认角色。
- role_edges：角色子图的边。
- password_history：密码更改历史。

有关静态和动态全局特权之间差异的信息，请参见静态与动态特权。

在MySQL 8.0中，授权表使用InnoDB存储引擎并且是事务性的。在MySQL 8.0之前，授权表使用MyISAM存储引擎并且是非事务性的。授权表存储引擎的更改使得伴随而来的账户管理语句（如CREATE USER或GRANT）的行为也发生了变化。以前，命名多个用户的账户管理语句可能对某些用户成功而对其他用户失败。现在，每个语句都是事务性的，如果出现任何错误，它要么对所有命名的用户成功，要么回滚并且没有任何效果。

每个授权表包含范围列和特权列：

- 范围列确定表中每行的范围；也就是说，行适用的上下文。例如，具有Host和User值为'h1.example.net'和'bob'的user表行适用于从主机h1.example.net向服务器发起的、指定用户名为bob的客户端的身份验证连接。类似地，具有Host、User和Db列值为'h1.example.net'、'bob'和'reports'的db表行适用于bob从主机h1.example.net连接以访问reports数据库时。tables_priv和columns_priv表包含指示每行适用的表或表/列组合的范围列。procs_priv的范围列指示每行适用的存储例程。

- 特权列指示表行授予的特权；也就是说，它允许执行的操作。服务器结合各种

授权表中的信息，形成用户特权的完整描述。第6.2.7节，“访问控制，第2阶段：请求验证”描述了这一点的规则。

此外，授权表可能包含用于范围或特权评估之外的目的的列。