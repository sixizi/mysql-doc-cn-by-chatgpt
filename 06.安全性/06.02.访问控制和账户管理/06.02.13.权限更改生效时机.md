#### 6.2.13 权限更改何时生效

如果 mysqld 服务器在启动时没有使用 `--skip-grant-tables `选项，它在启动序列期间将所有授权表内容读入内存。在这一点上，内存中的表成为访问控制的有效表。

如果您间接修改了授权表，使用帐户管理语句，服务器会立即注意到这些更改，并将授权表重新加载到内存中。帐户管理语句在第 13.7.1 节“帐户管理语句”中描述。示例包括 GRANT、REVOKE、SET PASSWORD 和 RENAME USER。

如果您直接使用 INSERT、UPDATE 或 DELETE 等语句直接修改授权表（这不是推荐的方法），这些更改对权限检查没有影响，直到您告诉服务器重新加载表格或重新启动它。因此，如果您直接更改了授权表但忘记重新加载它们，更改在重新启动服务器之前不会生效。这可能会让您感到困惑，为什么您的更改似乎没有产生任何影响！

要告诉服务器重新加载授权表，请执行刷新权限操作。可以通过发出 `FLUSH PRIVILEGES` 语句或执行 `mysqladmin flush-privileges` 或 `mysqladmin reload` 命令来完成此操作。

授权表重新加载会影响每个现有客户会话的权限，如下所示：

- 表和列权限更改将在客户端的下一个请求中生效。

- 数据库权限更改将在客户端执行下一个 USE db_name 语句时生效。

  > **注意：**
  >
  > 客户端应用程序可能会缓存数据库名称，因此除非实际更改为不同的数据库，否则它们可能看不到此效果。

- 针对连接的客户端，静态全局权限和密码不受影响。这些更改仅对随后的连接会话中的会话生效。对动态全局权限的更改立即生效。有关静态和动态权限之间的差异，请参见静态与动态权限。

- 会话中活动角色集的更改会立即对该会话生效，仅适用于该会话。SET ROLE 语句执行会话角色激活和停用（请参阅 SET ROLE 语句）。

如果服务器使用 --skip-grant-tables 选项启动，则不会读取授权表或实施任何访问控制。任何用户都可以连接并执行任何操作，这是不安全的。要使以这种方式启动的服务器读取表格并启用访问控制，请刷新权限。