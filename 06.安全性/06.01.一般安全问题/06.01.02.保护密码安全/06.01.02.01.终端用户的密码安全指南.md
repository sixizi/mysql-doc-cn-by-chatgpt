##### 6.1.2.1 终端用户的密码安全指南

MySQL 用户应遵循以下指南来保持密码安全。

当您运行客户端程序以连接到 MySQL 服务器时，不建议以暴露给其他用户发现的方式指定您的密码。以下列出了您运行客户端程序时可以用来指定密码的方法，以及每种方法的风险评估。简而言之，最安全的方法是让客户端程序提示输入密码，或者在适当保护的选项文件中指定密码。

- 使用 `mysql_config_editor `工具，它使您能够将认证凭据存储在名为 `.mylogin.cnf` 的加密登录路径文件中。MySQL 客户端程序稍后可以读取该文件，以获取连接到 MySQL 服务器的认证凭据。参见第 4.6.7 节，“mysql_config_editor — MySQL 配置工具”。

- 在命令行上使用 -`-password=password` 或 `-ppassword` 选项。例如：

  ```bash
  $> mysql -u francis -pfrank db_name
  ```

  > **警告**
  >
  > 这很方便但不安全。在某些系统上，您的密码可能会对其他用户可见，例如可能被其他用户调用的用于显示命令行的系统状态程序 ps。MySQL 客户端通常在初始化序列中用零覆盖命令行密码参数。然而，仍有一个短暂的间隔，密码是可见的。此外，在某些系统上，这种覆盖策略无效，密码仍然对 ps 可见。（SystemV Unix 系统和其他一些系统有此问题。）

  如果您的操作环境设置为在终端窗口的标题栏中显示您当前的命令，那么只要命令正在运行，密码就会一直可见，即使命令在窗口内容区域已经滚动出视野。

- 在命令行上使用 --password 或 -p 选项，但不指定密码值。在这种情况下，客户端程序会交互式地请求密码：

  ```bash
  $> mysql -u francis -p db_name
  Enter password: ********
  ```

  字符表示您输入密码的位置。输入时不会显示密码。

  这种输入密码的方式比在命令行上指定它更安全，因为对其他用户不可见。然而，这种输入密码的方法仅适用于您交互式运行的程序。如果您想从非交互式运行的脚本中调用客户端，那么就没有机会从键盘输入密码。在某些系统上，您甚至会发现您的脚本的第一行被读取并错误地解释为您的密码。

- 将您的密码存储在选项文件中。例如，在 Unix 上，您可以在家目录的 .my.cnf 文件的 [client] 部分列出您的密码：

  ```
  [client]
  password=password
  ```

  为了保护密码安全，该文件不应该被除您之外的任何人访问。为了确保这一点，请将文件访问模式设置为 400 或 600。例如：

  ```
  $> chmod 600 .my.cnf
  ```

  要在命令行中指定包含密码的特定选项文件，请使用` --defaults-file=file_name` 选项，其中 `file_name `是文件的完整路径名。例如：

  ```
  $> mysql --defaults-file=/home/francis/mysql-opts
  ```

  第 4.2.2.2 节，“使用选项文件”，更详细地讨论了选项文件。

在 Unix 上，mysql 客户端将执行的语句记录到历史文件中（参见第 4.5.1.3 节，“mysql 客户端日志记录”）。默认情况下，此文件名为 `.mysql_history`，并在您的家目录中创建。密码可能以纯文本形式写在诸如 CREATE USER 和 ALTER USER 的 SQL 语句中，因此如果您使用这些语句，它们将被记录在历史文件中。为了保护此文件的安全，请使用与之前描述的 .my.cnf 文件相同的限制性访问模式。

如果您的命令解释器维护一个历史记录，任何保存命令的文件都包含在命令行上输入的 MySQL 密码。例如，bash 使用 ~/.bash_history。任何此类文件都应具有限制性的访问模式。