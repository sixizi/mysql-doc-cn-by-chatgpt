### 10.2.1 优化 SELECT 语句

- [10.2.1.1 WHERE 子句优化](./10.02.01.01.WHERE 子句优化.md)
- [10.2.1.2 范围优化](./10.02.01.02.范围优化.md)
- [10.2.1.3 索引合并优化](./10.02.01.03.索引合并优化.md)
- [10.2.1.4 哈希连接优化](./10.02.01.04.哈希连接优化.md)
- [10.2.1.5 引擎条件下推优化](./10.02.01.05.引擎条件下推优化.md)
- [10.2.1.6 索引条件下推优化](./10.02.01.06.索引条件下推优化.md)
- [10.2.1.7 嵌套循环连接算法](./10.02.01.07.嵌套循环连接算法.md)
- [10.2.1.8 嵌套连接优化](./10.02.01.08.嵌套连接优化.md)
- [10.2.1.9 外连接优化](./10.02.01.09.外连接优化.md)
- [10.2.1.10 外连接简化](./10.02.01.10.外连接简化.md)
- [10.2.1.11 多范围读取优化](./10.02.01.11.多范围读取优化.md)
- [10.2.1.12 块嵌套循环和批量键访问连接](./10.02.01.12.块嵌套循环和批量键访问连接.md)
- [10.2.1.13 条件过滤](./10.02.01.13.条件过滤.md)
- [10.2.1.14 常量折叠优化](./10.02.01.14.常量折叠优化.md)
- [10.2.1.15 IS NULL 优化](./10.02.01.15.IS NULL 优化.md)
- [10.2.1.16 ORDER BY 优化](./10.02.01.16.ORDER BY 优化.md)
- [10.2.1.17 GROUP BY 优化](./10.02.01.17.GROUP BY 优化.md)
- [10.2.1.18 DISTINCT 优化](./10.02.01.18.DISTINCT 优化.md)
- [10.2.1.19 LIMIT 查询优化](./10.02.01.19.LIMIT 查询优化.md)
- [10.2.1.20 函数调用优化](./10.02.01.20.函数调用优化.md)
- [10.2.1.21 窗口函数优化](./10.02.01.21.窗口函数优化.md)
- [10.2.1.22 行构造器表达式优化](./10.02.01.22.行构造器表达式优化.md)
- [10.2.1.23 避免全表扫描](./10.02.01.23.避免全表扫描.md)

查询，以 SELECT 语句的形式，执行数据库中的所有查找操作。调优这些语句是首要任务，无论是为了实现动态网页的亚秒级响应时间，还是为了减少生成庞大的夜间报告所需的时间。

除了 SELECT 语句外，查询的调优技巧也适用于 CREATE TABLE...AS SELECT、INSERT INTO...SELECT 以及 DELETE 语句中的 WHERE 子句等构造。这些语句因为结合了写操作和以读为主的查询操作，所以有额外的性能考虑。

NDB 集群支持连接下推优化，即将符合条件的连接完整地发送到 NDB 集群数据节点，在那里可以在节点之间分布并并行执行。有关此优化的更多信息，请参见 NDB 下推连接的条件。

优化查询的主要考虑因素包括：

- 要使慢速的 SELECT ... WHERE 查询变快，首先要检查的是是否可以添加索引。在 WHERE 子句中使用的列上设置索引，以加速评估、过滤和最终结果的检索。为避免浪费磁盘空间，请构建一小组索引，以加速您的应用中使用的许多相关查询。

  特别是对于引用不同表的查询，索引尤其重要，使用的功能包括连接和外键。您可以使用 EXPLAIN 语句确定 SELECT 使用了哪些索引。请参阅第 10.3.1 节，“MySQL 如何使用索引”和第 10.8.1 节，“使用 EXPLAIN 优化查询”。

- 隔离并调优查询中任何耗时过多的部分，如函数调用。根据查询的结构，函数可能每返回一行结果就调用一次，甚至可能对表中的每一行都调用一次，极大地放大任何效率低下。

- 最小化查询中的全表扫描次数，尤其是对于大表。

- 通过定期使用 ANALYZE TABLE 语句保持表统计数据的最新状态，以便优化器拥有构建有效执行计划所需的信息。

- 学习特定于每个表的存储引擎的调优技巧、索引技术和配置参数。InnoDB 和 MyISAM 都有一套指南，用于在查询中启用和维持高性能。详情请见第 10.5.6 节，“优化 InnoDB 查询”和第 10.6.1 节，“优化 MyISAM 查询”。

- 您可以使用第 10.5.3 节中的技术，“优化 InnoDB 只读事务”，为 InnoDB 表优化单查询事务。

- 避免以使查询难以理解的方式转换查询，尤其是当优化器自动进行某些相同转换时。

- 如果性能问题不容易通过基本指南解决，请通过阅读 EXPLAIN 计划并调整您的索引、WHERE 子句、连接子句等来调查特定查询的内部细节。（当您达到一定的专业水平时，阅读 EXPLAIN 计划可能是您对每个查询的第一步。）

- 调整 MySQL 用于缓存的内存区域的大小和属性。通过有效使用 InnoDB 缓冲池、MyISAM 关键缓存和 MySQL 查询缓存，重复查询运行更快，因为第二次及后续的结果是从内存中检索的。

- 即使对于使用缓存内存区域运行速度快的查询，您可能仍需要进一步优化，以便它们需要更少的缓存内存，使您的应用更具可扩展性。可扩展性意味着您的应用程序可以处理更多的同时用户、更大的请求等，而不会经历性能的大幅下降。

- 处理锁定问题，您的查询速度可能会受到其他会话同时访问表的影响。