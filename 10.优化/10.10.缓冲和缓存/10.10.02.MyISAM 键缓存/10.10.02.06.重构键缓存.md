#### 10.10.2.6 重构键缓存

可以随时通过更新参数值来重构键缓存。例如：

```sql
mysql> SET GLOBAL cold_cache.key_buffer_size=4*1024*1024;
```

如果为 `key_buffer_size` 或 `key_cache_block_size` 键缓存组件分配与当前值不同的值，服务器将销毁缓存的旧结构并根据新值创建新结构。如果缓存中包含任何脏块，服务器会在销毁和重新创建缓存之前将它们保存到磁盘。更改其他键缓存参数不会引起重构。

在重构键缓存时，服务器首先将任何脏缓冲区的内容刷新到磁盘。之后，缓存内容将变得不可用。然而，重构不会阻塞需要使用分配给缓存的索引的查询。相反，服务器使用本地文件系统缓存直接访问表索引。文件系统缓存的效率不如键缓存，所以尽管查询可以执行，但预期会有一定的性能下降。缓存重构完成后，它再次可用于缓存分配给它的索引，并且索引的文件系统缓存使用将停止。