### 10.10.2.4 索引预加载

如果键缓存中有足够的块来容纳整个索引的块，或者至少容纳其非叶节点对应的块，那么在使用之前将索引块预加载到键缓存中是有意义的。预加载使您能够以最有效的方式将表的索引块放入键缓存缓冲区：通过顺序地从磁盘读取索引块。

没有预加载的情况下，块仍然会根据查询需要被放置到键缓存中。虽然因为缓冲区足够，所有块都会留在缓存中，但它们是随机顺序地从磁盘读取，而不是顺序地。

要将索引预加载到缓存中，请使用 `LOAD INDEX INTO CACHE` 语句。例如，以下语句将表 t1 和 t2 的索引节点（索引块）预加载：

```sql
mysql> LOAD INDEX INTO CACHE t1, t2 IGNORE LEAVES;
+---------+--------------+----------+----------+
| Table   | Op           | Msg_type | Msg_text |
+---------+--------------+----------+----------+
| test.t1 | preload_keys | status   | OK       |
| test.t2 | preload_keys | status   | OK       |
+---------+--------------+----------+----------+
```

`IGNORE LEAVES` 修饰符使得只预加载索引的非叶节点的块。因此，显示的语句将预加载 t1 的所有索引块，但只预加载 t2 的非叶节点块。

如果使用 `CACHE INDEX` 语句将索引分配给一个键缓存，预加载将索引块放入该缓存中。否则，索引将被加载到默认键缓存中。