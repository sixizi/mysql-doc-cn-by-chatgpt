#### 15.6.2.2 InnoDB索引的物理结构

除了空间索引外，InnoDB索引都是B树数据结构。空间索引使用R树，这是一种专门用于索引多维数据的数据结构。索引记录存储在其B树或R树数据结构的叶子页面中。索引页面的默认大小为16KB。页面大小由初始化MySQL实例时的innodb_page_size设置确定。有关详细信息，请参见第15.8.1节“InnoDB启动配置”。

当新记录被插入到InnoDB聚集索引中时，InnoDB尝试为未来插入和更新索引记录保留页面的1/16空间。如果索引记录是按顺序（升序或降序）插入的，那么产生的索引页面大约为15/16满。如果记录是随机插入的，页面填充度在1/2到15/16之间。

InnoDB在创建或重建B树索引时执行批量加载。这种索引创建方法被称为排序索引构建。innodb_fill_factor变量定义了在排序索引构建期间每个B树页面填充的百分比，其余空间保留用于未来索引增长。空间索引不支持排序索引构建。更多信息请参见第15.6.2.3节“排序索引构建”。innodb_fill_factor设置为100意味着聚集索引页面的1/16空间留作未来索引增长。

如果InnoDB索引页面的填充因子低于MERGE_THRESHOLD（默认情况下为50%，如果未指定），InnoDB会尝试收缩索引树以释放页面。MERGE_THRESHOLD设置适用于B树和R树索引。更多信息请参见第15.8.11节“配置索引页面的合并阈值”。