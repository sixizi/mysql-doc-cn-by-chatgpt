#### 15.8.3.2 配置多个缓冲池实例

对于具有数千兆字节范围的缓冲池的系统，将缓冲池分割成不同的实例可以提高并发性，通过减少不同线程读取和写入缓存页时的竞争。这个功能通常适用于缓冲池大小在多千兆字节范围的系统。多个缓冲池实例是使用 `innodb_buffer_pool_instances` 配置选项来配置的，您可能还需要调整 `innodb_buffer_pool_size` 的值。

当InnoDB缓冲池很大时，许多数据请求可以通过从内存中检索来满足。您可能会遇到多个线程同时尝试访问缓冲池时的瓶颈。您可以启用多个缓冲池来最小化这种竞争。存储在缓冲池中或从缓冲池读取的每个页面都随机分配给其中一个缓冲池，使用哈希函数。每个缓冲池管理其自己的空闲列表、刷新列表、LRU（最近最少使用）以及与缓冲池相关的所有其他数据结构。在MySQL 8.0之前，每个缓冲池由其自己的缓冲池互斥锁保护。在MySQL 8.0及以后版本中，缓冲池互斥锁被几个列表和哈希保护互斥锁所取代，以减少竞争。

要启用多个缓冲池实例，请将 `innodb_buffer_pool_instances` 配置选项设置为大于1（默认值）的值，最多可达64（最大值）。只有在将 `innodb_buffer_pool_size` 设置为1GB或更大时，此选项才会生效。您指定的总大小将在所有缓冲池之间分配。为了达到最佳效率，指定 `innodb_buffer_pool_instances` 和 `innodb_buffer_pool_size` 的组合，以便每个缓冲池实例至少为1GB。

有关修改InnoDB缓冲池大小的信息，请参见15.8.3.1节“配置InnoDB缓冲池大小”。