### 8.2.1 账户用户名和密码

MySQL将账户存储在mysql系统数据库的user表中。一个账户是根据用户名以及用户可以从中连接到服务器的客户端主机或主机来定义的。有关user表中账户表示的信息，请参见[第6.2.3节，授权表](./08.02.03.授权表.md)。

账户还可能有诸如密码之类的认证凭证。这些凭证由账户认证插件处理。MySQL支持多种认证插件。其中一些使用内置的认证方法，而其他则启用使用外部认证方法的认证。请参见[8.2.17节，可插拔认证](./08.02.17.可插拔认证.md)。

MySQL和操作系统使用用户名和密码的方式有几个区别：

- MySQL用于认证目的的用户名与Windows或Unix使用的用户名（登录名）无关。在Unix上，大多数MySQL客户端默认尝试使用当前Unix用户名作为MySQL用户名登录，但这仅为方便而已。因为客户端程序允许使用-u或--user选项指定任何用户名，所以默认设置可以很容易地被覆盖。这意味着任何人都可以尝试使用任何用户名连接到服务器，因此除非所有MySQL账户都有密码，否则你无法以任何方式保证数据库的安全。任何为没有密码的账户指定用户名的人都可以成功连接到服务器。

- MySQL用户名最长可达32个字符。操作系统用户名可能有不同的最大长度。

  > **警告**
  >
  > MySQL用户名长度限制在MySQL服务器和客户端中硬编码，尝试通过修改mysql数据库中的表定义来绕过它是不起作用的。
  >
  > 你永远不应该以任何方式更改mysql数据库中的表结构，除非通过第2.10节中描述的程序，“升级MySQL”。以任何其他方式重新定义MySQL系统表会导致未定义和不受支持的行为。服务器可以自由地忽略由于此类修改而变得畸形的行。
  >

- 要对使用内置认证方法的账户进行客户端连接认证，服务器使用user表中存储的密码。这些密码与登录操作系统的密码不同。登录Windows或Unix机器的“外部”密码与你用来访问该机器上的MySQL服务器的密码之间没有必要的联系。

  如果服务器使用某些其他插件对客户端进行认证，该插件实现的认证方法可能会也可能不会使用user表中存储的密码。在这种情况下，也可能使用外部密码来认证到MySQL服务器。

- user表中存储的密码使用插件特定的算法进行加密。

- 如果用户名和密码仅包含ASCII字符，无论字符集设置如何，都可以连接到服务器。要在用户名或密码包含非ASCII字符时启用连接，客户端应用程序应该调用mysql_options() C API函数，带上MYSQL_SET_CHARSET_NAME选项和适当的字符集名称作为参数。这将导致使用指定的字符集进行认证。否则，除非服务器默认字符集与认证默认编码相同，否则认证将失败。

  标准的MySQL客户端程序支持一个--default-character-set选项，该选项会导致像刚才描述的那样调用mysql_options()。此外，还支持如第10.4节中所述的字符集自动检测，“连接字符集和排序规则”。对于使用非基于C API的连接器的程序，连接器可能提供了mysql_options()的等效物，可以替代使用。请检查连接器文档。

  前面的说明不适用于ucs2、utf16和utf32，这些不允许作为客户端字符集。

MySQL安装过程填充授权表中的初始root账户，如第2.9.4节所述，“保护初始MySQL账户”，其中还讨论了如何为其分配密码。此后，你通常使用CREATE USER、DROP USER、GR

ANT和REVOKE等语句来设置、修改和移除MySQL账户。请参见6.2.8节，“添加账户、分配权限及删除账户”，和第13.7.1节，“账户管理语句”。

要使用命令行客户端连接到MySQL服务器，请根据你想要使用的账户，必要时指定用户名和密码选项：

```
$> mysql --user=finley --password db_name
```

如果你喜欢短选项，命令看起来像这样：

```
$> mysql -u finley -p db_name
```

如果你在命令行上省略了--password或-p选项后面的密码值（如刚才所示），客户端会提示输入密码。或者，密码可以在命令行上指定：

```
$> mysql --user=finley --password=password db_name
$> mysql -u finley -ppassword db_name
```

如果你使用-p选项，在-p和后面的密码值之间不能有空格。

在命令行上指定密码应该被认为是不安全的。请参见6.1.2.1节，“最终用户密码安全指南”。为了避免在命令行上给出密码，请使用选项文件或登录路径文件。请参见第4.2.2.2节，“使用选项文件”，和第4.6.7节，“mysql_config_editor — MySQL配置实用程序”。

有关指定用户名、密码和其他连接参数的更多信息，请参见第4.2.4节，“使用命令选项连接到MySQL服务器”。