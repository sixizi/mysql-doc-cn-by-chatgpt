### 8.4.5 MySQL 企业审计

- [8.4.5.1 MySQL 企业审计的要素](./08.04.05.01.MySQL 企业审计的要素.md)
- [8.4.5.2 安装或卸载 MySQL 企业审计](./08.04.05.02.安装或卸载 MySQL 企业审计.md)
- [8.4.5.3 MySQL 企业审计的安全注意事项](./08.04.05.03.MySQL 企业审计的安全注意事项.md)
- [8.4.5.4 审计日志文件格式](./08.04.05.04.审计日志文件格式.md)
- [8.4.5.5 配置审计日志记录特性](./08.04.05.05.配置审计日志记录特性.md)
- [8.4.5.6 读取审计日志文件](./08.04.05.06.读取审计日志文件.md)
- [8.4.5.7 审计日志过滤](./08.04.05.07.审计日志过滤.md)
- [8.4.5.8 编写审计日志过滤器定义](./08.04.05.08.编写审计日志过滤器定义.md)
- [8.4.5.9 禁用审计日志记录](./08.04.05.09.禁用审计日志记录.md)
- [8.4.5.10 旧模式审计日志过滤](./08.04.05.10.旧模式审计日志过滤.md)
- [8.4.5.11 审计日志参考](./08.04.05.11.审计日志参考.md)
- [8.4.5.12 审计日志限制](./08.04.05.12.审计日志限制.md)

> **注意**  
> MySQL 企业审计是包含在 MySQL 企业版中的扩展功能，这是一款商业产品。要了解更多关于商业产品的信息，请参见 [https://www.mysql.com/products/](https://www.mysql.com/products/)。

MySQL 企业版包括 MySQL 企业审计，通过一个名为 `audit_log` 的服务器插件实现。MySQL 企业审计使用开放的 MySQL 审计 API 来启用基于策略的标准监控、日志记录和阻止在特定 MySQL 服务器上执行的连接和查询活动。MySQL 企业审计旨在满足 Oracle 审计规范，为受内部和外部法规指南管控的应用提供开箱即用、易于使用的审计和合规解决方案。

安装审计插件后，MySQL 服务器能够生成包含服务器活动审计记录的日志文件。日志内容包括客户端连接和断开连接的时间，以及连接期间执行的操作，例如访问了哪些数据库和表。从 MySQL 8.0.30 开始，您可以添加每个查询的时间和大小统计数据以检测异常。

默认情况下，MySQL 企业审计使用 `mysql` 系统数据库中的表来持久存储过滤器和用户账户数据。要使用不同的数据库，请在服务器启动时设置 `audit_log_database` 系统变量（从 MySQL 8.0.33 开始）。

在安装审计插件后（参见 [8.4.5.2 安装或卸载 MySQL 企业审计](#8.4.5.2-安装或卸载-MySQL-企业审计)），它会写入一个审计日志文件。默认情况下，该文件名为 `audit.log`，位于服务器数据目录中。要更改文件名，请在服务器启动时设置 `audit_log_file` 系统变量。

默认情况下，审计日志文件内容以新式 XML 格式写入，没有压缩或加密。要选择文件格式，请在服务器启动时设置 `audit_log_format` 系统变量。有关文件格式和内容的详细信息，请参见 [8.4.5.4 审计日志文件格式](#8.4.5.4-审计日志文件格式)。

有关控制日志记录方式的更多信息，包括审计日志文件命名和格式选择，请参见 [8.4.5.5 配置审计日志记录特性](#8.4.5.5-配置审计日志记录特性)。要执行审计事件的过滤，请参见 [8.4.5.7 审计日志过滤](#8.4.5.7-审计日志过滤)。有关配置审计日志插件所使用的参数描述，请参见审计日志选项和变量。

如果启用了审计日志插件，性能模式（参见第 29 章，MySQL 性能模式）会有相应的检测。要识别相关的检测工具，请使用以下查询：

```sql
SELECT NAME FROM performance_schema.setup_instruments
WHERE NAME LIKE '%/alog/%';
```