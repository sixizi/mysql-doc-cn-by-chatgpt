## 8.3 使用加密连接

[8.3.1 配置MySQL使用加密连接](./08.03.01.配置MySQL使用加密连接.md)
[8.3.2 加密连接TLS协议和密码](./08.03.02.加密连接TLS协议和密码.md)
[8.3.3 创建SSL和RSA证书和密钥](./08.03.03.创建SSL和RSA证书和密钥/08.03.03.00.创建SSL和RSA证书和密钥.md)
[8.3.4 通过SSH从Windows远程连接到MySQL](./08.03.04.通过SSH从Windows远程连接到MySQL.md)
[8.3.5 重用SSL会话](./08.03.05.重用SSL会话.md)

MySQL客户端与服务器之间的非加密连接可能会被网络访问者监控，他们可以观察您的所有流量并检查客户端和服务器之间发送或接收的数据。

当您需要以安全的方式在网络上移动信息时，非加密连接是不可接受的。要使任何类型的数据不可读，使用加密。加密算法必须包括安全元素，以抵御多种已知攻击，例如更改加密消息的顺序或重复数据。

MySQL支持客户端和服务器之间使用TLS（传输层安全）协议的加密连接。TLS有时被称为SSL（安全套接字层），但MySQL实际上不使用SSL协议进行加密连接，因为其加密弱（见[8.3.2节，加密连接TLS协议和密码](./08.03.02.加密连接TLS协议和密码.md)）。

TLS使用加密算法来确保通过公共网络接收的数据可信。它具有检测数据变化、丢失或重放的机制。TLS还结合了提供身份验证的算法，使用X.509标准。

X.509使得在互联网上识别某人成为可能。基本上，应该有一个称为“证书颁发机构”（或CA）的实体，为需要它们的任何人分配电子证书。证书依赖于具有两个加密密钥（公钥和私钥）的非对称加密算法。证书所有者可以将证书呈现给另一方作为身份的证明。证书由其所有者的公钥组成。使用此公钥加密的任何数据只能使用与之对应的私钥解密，而私钥由证书所有者持有。

MySQL使用OpenSSL提供加密连接的支持。有关OpenSSL支持的加密协议和密码的信息，请参见[8.3.2节，加密连接TLS协议和密码](./08.03.02.加密连接TLS协议和密码.md)。

默认情况下，MySQL实例在运行时链接到可用的已安装OpenSSL库，以支持加密连接和其他与加密相关的操作。您可以从源代码编译MySQL，并使用WITH_SSL CMake选项指定特定已安装的OpenSSL版本或替代的OpenSSL系统包的路径。在这种情况下，MySQL选择该版本。有关如何执行此操作的说明，请参阅[2.8.6节，配置SSL库支持](../02.安装和升级MySQL/02.08.从源代码安装MySQL/02.08.06.配置SSL库支持.md)。

从MySQL 8.0.11到8.0.17，可以使用wolfSSL作为OpenSSL的替代方案来编译MySQL。从MySQL 8.0.18开始，不再支持wolfSSL，所有MySQL构建都使用OpenSSL。

您可以使用Tls_library_version系统状态变量在运行时检查正在使用的OpenSSL库版本，该变量从MySQL 8.0.30开始可用。

如果您使用一个版本的OpenSSL编译MySQL，并希望在不重新编译的情况下更改为不同的版本，则可以通过编辑动态库加载器路径（在Unix系统上为LD_LIBRARY_PATH或在Windows系统上为PATH）来实现。删除指向已编译版本的OpenSSL的路径，并添加替换版本的路径，在路径上的任何其他OpenSSL库之前放置它。在启动时，如果MySQL找不到用WITH_SSL指定的路径上的OpenSSL版本，它会改为使用路径上指定的第一个版本。

默认情况下，如果服务器支持加密连接，MySQL程序会尝试使用加密进行连接，如果无法建立加密连接，则回退到非加密连接。有关影响加密连接使用的选项的信息，请参见[8.3.1 配置MySQL使用加密连接](./08.03.01.配置MySQL使用加密连接.md)和加密连接的命令选项。

MySQL在每个连接的基础上执行加密，并且给定用户的加密使用可以是可选的或强制性的。这使您可以根据各个应用程序的要求选择加密或非加密连接。有关如何要求用户使用加密连接的信息，请参阅13.7.1.3节“CREATE USER语句”的REQUIRE子句的讨论。另见5.1.8节“服务器系统变量”中require_secure_transport系统变量的描述

加密连接可用于源服务器和副本服务器之间。请参阅17.3.1节，“设置使用加密连接的复制”。

有关使用MySQL C API进行加密连接的信息，请参阅加密连接的支持。

还可以从SSH连接到MySQL服务器主机内使用加密进行连接。有关示例，请参阅[8.3.4 通过SSH从Windows远程连接到MySQL](./08.03.04.通过SSH从Windows远程连接到MySQL.md)。