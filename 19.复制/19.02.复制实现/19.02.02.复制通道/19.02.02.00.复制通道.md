### 19.2.2 复制通道

#### 19.2.2.1 对单个通道操作的命令
#### 19.2.2.2 与之前复制声明的兼容性
#### 19.2.2.3 启动选项和复制通道
#### 19.2.2.4 复制通道命名约定
在MySQL多源复制中，一个副本服务器打开多个复制通道，每个源服务器一个。复制通道代表了从源到副本的事务流路径。每个复制通道都有它自己的接收器（I/O）线程、一个或多个应用器（SQL）线程，以及中继日志。当源的事务由通道的接收器线程接收时，它们被添加到通道的中继日志文件中，并传递给通道的应用器线程。这使得每个通道能够独立功能。

本节描述了在复制拓扑中如何使用通道，以及它们对单源复制的影响。关于配置多源复制的源和副本、启动、停止和重置多源副本，以及监视多源复制的指令，请参见第19.1.5节，“MySQL多源复制”。

在多源复制拓扑中，一个副本服务器上可以创建的通道最大数量是256。每个复制通道必须有一个唯一的（非空）名称，如第19.2.2.4节“复制通道命名约定”中所解释的。启用多源复制时发出的错误代码和消息指明了生成错误的通道。

> 注意：多源副本上的每个通道必须从不同的源复制。你不能从单个副本到单个源设置多个复制通道。这是因为副本的服务器ID在复制拓扑中必须是唯一的。源仅通过副本的服务器ID来区分副本，而不是复制通道的名称，因此它不能识别来自同一副本的不同复制通道。

通过将系统变量`replica_parallel_workers`（从MySQL 8.0.26开始）或`slave_parallel_workers`（在MySQL 8.0.26之前）设置为大于0的值，也可以将多源副本设置为多线程副本。当你在多源副本上这样做时，副本上的每个通道都有指定数量的应用器线程，加上一个协调它们的协调器线程。你不能为单独的通道配置应用器线程的数量。

从MySQL 8.0开始，多源副本可以在特定复制通道上配置复制过滤器。当同一数据库或表在多个源上存在，并且你只需要副本从一个源复制它时，可以使用通道特定的复制过滤器。对于基于GTID的复制，如果相同的事务可能从多个源到达（如在菱形拓扑中），你必须确保所有通道上的过滤设置相同。更多信息，请参见第19.2.5.4节“基于复制通道的过滤器”。

为了与以前的版本兼容，MySQL服务器在启动时自动创建一个默认通道，其名称是空字符串("")。这个通道总是存在的；用户不能创建或销毁它。如果没有创建其他具有非空名称的通道，则复制声明只作用于默认通道，以便所有来自旧副本的复制声明按预期功能（见第19.2.2.2节，“与之前复制声明的兼容性”）。只有当至少有一个命名通道时，才可以使用本节中描述的适用于复制通道的声明。