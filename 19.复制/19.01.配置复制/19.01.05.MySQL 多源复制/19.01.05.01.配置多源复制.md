#### 19.1.5.1 配置多源复制

多源复制拓扑至少需要配置两个源和一个副本。在这些教程中，我们假设您有两个源`source1`和`source2`，以及一个副本`replicahost`。副本从每个源复制一个数据库，从`source1`复制`db1`，从`source2`复制`db2`。

多源复制拓扑中的源可以配置为使用基于GTID的复制或基于二进制日志位置的复制。参见第19.1.3.4节，“使用GTID设置复制”了解如何配置使用基于GTID的复制的源。参见第19.1.2.1节，“设置复制源配置”了解如何配置使用文件位置基的复制的源。

多源复制拓扑中的副本需要`TABLE`仓库作为副本的连接元数据仓库和应用元数据仓库，这是MySQL 8.0中的默认设置。多源复制不兼容已弃用的文件仓库替代方案。

在所有源上创建一个适当的用户帐户，副本可以使用该帐户连接。您可以在所有源上使用相同的帐户，或者在每个源上使用不同的帐户。如果您仅为复制目的创建一个帐户，该帐户只需要`REPLICATION SLAVE`权限。例如，要设置一个新用户`ted`，该用户可以从副本`replicahost`连接，请在每个源上使用mysql客户端发出以下语句：

```sql
CREATE USER 'ted'@'replicahost' IDENTIFIED BY 'password';
GRANT REPLICATION SLAVE ON *.* TO 'ted'@'replicahost';
```

有关更多详细信息，以及有关MySQL 8.0新用户默认认证插件的重要信息，请参见第19.1.2.3节，“创建用于复制的用户”。