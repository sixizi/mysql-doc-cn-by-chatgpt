#### 19.5.1.32 复制重试和超时

系统变量 `replica_transaction_retries`（从 MySQL 8.0.26 开始）或 `slave_transaction_retries`（在 MySQL 8.0.26 之前）的全局值设置单线程或多线程副本上的应用程序线程在停止之前自动重试失败事务的最大次数。当 SQL 线程因为 InnoDB 死锁或事务执行时间超过 InnoDB 的 `innodb_lock_wait_timeout` 值而无法执行它们时，事务会自动重试。如果事务有一个非临时错误阻止其成功执行，它将不会被重试。

`replica_transaction_retries` 或 `slave_transaction_retries` 的默认设置为 10，意味着在出现表面上是临时错误的失败事务被应用程序线程停止前会重试 10 次。将该变量设置为 0 将禁用事务的自动重试。在多线程副本上，所有应用程序线程的所有通道可以进行指定次数的事务重试。性能模式（Performance Schema）表 `replication_applier_status` 显示在每个复制通道上发生的事务重试总次数，在 `COUNT_TRANSACTIONS_RETRIES` 列中。

重试事务的过程可能会导致副本或群组复制组成员（可以配置为单线程或多线程副本）出现延迟。性能模式表 `replication_applier_status_by_worker` 显示了单线程或多线程副本上的应用程序线程的事务重试的详细信息。这些数据包括时间戳，显示应用程序线程从开始到完成应用最后一个事务所需的时间（以及当前正在进行的事务何时开始），以及这在原始源和直接源的提交之后多久。数据还显示了最后一个事务和当前进行的事务的重试次数，并使您能够识别导致事务被重试的瞬态错误。您可以使用这些信息来查看事务重试是否是复制延迟的原因，并调查导致重试的失败的根本原因。