### 19.5.1.17 复制 JSON 文档

在 MySQL 8.0 之前，对 JSON 列的更新总是以完整文档的形式写入二进制日志。在 MySQL 8.0 中，可以对 JSON 文档进行部分更新的日志记录（参见“JSON 值的部分更新”），这种方式更加高效。日志记录行为取决于使用的格式，如下所述：

#### 基于语句的复制
- JSON 部分更新总是被记录为部分更新。在使用基于语句的日志记录时，这不能被禁用。

#### 基于行的复制
- 默认情况下，JSON 部分更新不作为部分更新进行记录，而是作为完整文档进行记录。要启用部分更新的记录，请设置 `binlog_row_value_options=PARTIAL_JSON`。如果复制源设置了此变量，那么从该源接收的部分更新将由副本处理和应用，无论副本自己的该变量设置如何。

运行 MySQL 8.0.2 或更早版本的服务器不识别用于 JSON 部分更新的日志事件。因此，当从运行 MySQL 8.0.3 或更高版本的服务器复制到这样的服务器时，必须在源服务器上禁用 `binlog_row_value_options`，通过将此变量设置为 `''`（空字符串）。有关此变量的更多信息，请参见其描述。