#### 20.7.7.3 自动重新加入

`group_replication_autorejoin_tries` 系统变量，从 MySQL 8.0.16 开始可用，使被逐出或达到不可达多数超时的成员尝试自动重新加入组。在 MySQL 8.0.20 之前，默认情况下，该系统变量的值为0，因此默认情况下不激活自动重新加入功能。从 MySQL 8.0.21 开始，该系统变量的值默认为3，意味着成员会自动尝试重新加入组，共进行3次尝试，每次尝试之间间隔5分钟。

当未激活自动重新加入时，成员在恢复通信后立即接受被逐出，并按照 `group_replication_exit_state_action` 系统变量指定的操作继续。在此之后，需要手动干预才能将成员重新加入组。如果可以容忍可能导致成员被频繁逐出的瞬时网络问题，并且希望最小化手动干预的需求，特别是在这些问题导致成员被逐出的情况下，使用自动重新加入功能是合适的。

使用自动重新加入时，当成员达到其逐出或不可达多数超时时，它会尝试重新加入组（使用当前的插件选项值），然后继续进行更多的自动重新加入尝试，最多进行指定数量的尝试。在每次不成功的自动重新加入尝试之后，成员会等待5分钟才进行下一次尝试。自动重新加入尝试和它们之间的时间被称为自动重新加入过程。如果耗尽了指定的尝试次数，而成员仍未重新加入或被停止，成员会执行 `group_replication_exit_state_action` 系统变量指定的操作。

在自动重新加入尝试期间和尝试之间，成员保持在超级只读模式，并在其对复制组的视图上显示为错误状态。在此期间，成员不接受写操作。但是，可以继续对成员进行读取操作，随着时间的推移，出现陈旧读取的可能性逐渐增加。如果您想在自动重新加入过程中随时干预以将成员下线，可以使用 `STOP GROUP_REPLICATION` 语句或关闭服务器来随时手动停止成员。如果无法容忍任何时段的陈旧读取可能性，请将 `group_replication_autorejoin_tries` 系统变量设置为0。

您可以使用性能模式（Performance Schema）来监视自动重新加入过程。在进行自动重新加入过程时，性能模式表 `events_stages_current` 显示事件“正在进行自动重新加入过程”，并显示了在该过程的当前实例中已尝试的重试次数（在 `WORK_COMPLETED` 字段中）。`events_stages_summary_global_by_event_name` 表显示服务器实例启动自动重新加入过程的次数（在 `COUNT_STAR` 字段中）。`events_stages_history_long` 表显示每个自动重新加入过程完成的时间（在 `TIMER_END` 字段中）。在成员重新加入复制组时，其状态可以在组完成兼容性检查并接受其为成员之前显示为 `OFFLINE` 或 `ERROR`。当成员赶上组的事务时，其状态为 `RECOVERING`。