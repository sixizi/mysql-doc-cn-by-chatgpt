#### 25.4.3.11 使用直接连接的 NDB Cluster TCP/IP 连接

使用数据节点之间的直接连接设置集群需要在集群 `config.ini` 文件的 `[tcp]` 部分中明确指定数据节点的交叉 IP 地址。

在以下示例中，我们设想一个集群至少有四个主机，分别用于管理服务器、SQL 节点和两个数据节点。整个集群位于局域网的 172.23.72.* 子网中。除了常规的网络连接外，这两个数据节点还使用标准交叉电缆直接连接，并使用 1.1.0.* 地址范围的 IP 地址直接通信，如下所示：

```ini
# 管理服务器
[ndb_mgmd]
Id=1
HostName=172.23.72.20

# SQL 节点
[mysqld]
Id=2
HostName=172.23.72.21

# 数据节点
[ndbd]
Id=3
HostName=172.23.72.22

[ndbd]
Id=4
HostName=172.23.72.23

# TCP/IP 连接
[tcp]
NodeId1=3
NodeId2=4
HostName1=1.1.0.1
HostName2=1.1.0.2
```

`HostName1` 和 `HostName2` 参数仅在指定直接连接时使用。

使用数据节点之间的直接 TCP 连接可以提高集群的整体效率，使数据节点能够绕过交换机、集线器或路由器等以太网设备，从而减少集群的延迟。

> **注意**
>
> 为了在有两个以上数据节点时充分利用这种直接连接，您必须在每个数据节点和同一节点组中的每个其他数据节点之间建立直接连接。